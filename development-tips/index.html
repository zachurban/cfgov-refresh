<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Development Tips - cfgov-refresh</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="../css/overrides.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Development Tips";
    var mkdocs_page_input_path = "development-tips.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> cfgov-refresh</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Introduction</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../installation/">Installation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../usage/">Usage</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Pages and Components</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../atomic-structure/">Atomic Structure and Design</a>
                </li>
                <li class="">
                    
    <a class="" href="../editing-components/">Creating and Editing Components</a>
                </li>
                <li class="">
                    
    <a class="" href="../migrations/">Django and Wagtail Migrations</a>
                </li>
                <li class="">
                    
    <a class="" href="../mega-menu/">Editing the Mega Menu</a>
                </li>
                <li class="">
                    
    <a class="" href="../forms-in-wagtail/">Forms in Wagtail Page Context</a>
                </li>
                <li class="">
                    
    <a class="" href="../wagtail-pages/">Wagtail Pages</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Supporting Features</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../caching/">Caching</a>
                </li>
                <li class="">
                    
    <a class="" href="../feature-flags/">Feature Flags</a>
                </li>
                <li class="">
                    
    <a class="" href="../satellite-repos/">Satellite Repos</a>
                </li>
                <li class="">
                    
    <a class="" href="../split-testing/">Split Testing</a>
                </li>
                <li class="">
                    
    <a class="" href="../translation/">Translation</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Testing</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../browser-acceptance-tests/">Browser/Acceptance Testing</a>
                </li>
                <li class="">
                    
    <a class="" href="../javascript-unit-tests/">JavaScript Unit Testing</a>
                </li>
                <li class="">
                    
    <a class="" href="../python-unit-tests/">Python Unit Testing</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Contributing</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../branching-merging/">Branching and Merging</a>
                </li>
                <li class="">
                    
    <a class="" href="../contributing-docs/">Contributing to the Docs</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Development Tips</a>
    <ul class="subnav">
            
    
        <ul>
        
            <li><a class="toctree-l4" href="#tip-developing-on-nested-satellite-apps">TIP: Developing on nested satellite apps</a></li>
        
            <li><a class="toctree-l4" href="#tip-loading-satellite-apps">TIP: Loading satellite apps</a></li>
        
            <li><a class="toctree-l4" href="#tip-working-with-the-templates">TIP: Working with the templates</a></li>
        
            <li><a class="toctree-l4" href="#tip-debugging-site-performance">TIP: Debugging site performance</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../travis/">How We Use Travis CI</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Public APIs and Data</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../ask-cfpb/">Ask CFPB</a>
                </li>
                <li class="">
                    
    <a class="" href="../consumer-complaint-database/">Consumer Complaints</a>
                </li>
                <li class="">
                    
    <a class="" href="../housing-counselor-tool/">Find a Housing Counselor Tool</a>
                </li>
                <li class="">
                    
    <a class="" href="../hmda/">HMDA Data</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">cfgov-refresh</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Contributing &raquo;</li>
        
      
    
    <li>Development Tips</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/cfpb/cfgov-refresh/edit/master/docs/development-tips.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="development-tips">Development tips<a class="headerlink" href="#development-tips" title="Permanent link">¶</a></h2>
<h3 id="tip-developing-on-nested-satellite-apps">TIP: Developing on nested satellite apps<a class="headerlink" href="#tip-developing-on-nested-satellite-apps" title="Permanent link">¶</a></h3>
<p>Some projects can sit inside cfgov-refresh, but manage their own asset
dependencies. These projects have their own package.json and base templates.</p>
<p>The structure looks like this:</p>
<h4 id="npm-modules">npm modules<a class="headerlink" href="#npm-modules" title="Permanent link">¶</a></h4>
<ul>
<li>App's own dependency list is in
  <code>cfgov/unprocessed/apps/[project namespace]/package.json</code></li>
<li>App's <code>node_modules</code> path is listed in the Travis config
  <a href="https://github.com/cfpb/cfgov-refresh/blob/master/.travis.yml#L10">https://github.com/cfpb/cfgov-refresh/blob/master/.travis.yml#L10</a>
  so that their dependencies will be available when Travis runs.</li>
</ul>
<h4 id="webpack">Webpack<a class="headerlink" href="#webpack" title="Permanent link">¶</a></h4>
<ul>
<li>Apps may include their own webpack-config.js configuration that adjusts how
  their app-specific assets should be built. This configuration appears in
  <code>cfgov/unprocessed/apps/[project namespace]/webpack-config.js</code></li>
</ul>
<h4 id="browserlist">Browserlist<a class="headerlink" href="#browserlist" title="Permanent link">¶</a></h4>
<ul>
<li>Apps may include a
  <a href="https://github.com/browserslist/browserslist#config-file">browserlist config</a>
  file, which is automatically picked up by <code>@babel/preset-env</code> inside the
  webpack config, if no <code>browsers</code> option is supplied.</li>
</ul>
<h4 id="adding-images">Adding Images<a class="headerlink" href="#adding-images" title="Permanent link">¶</a></h4>
<ul>
<li>Images should be compressed and optimized before being committed to the repo</li>
<li>In order to keep builds fast and reduce dependencies, the front-end build does not contain an image optimization step</li>
<li>A suggested workflow for those with Adobe Creative Suite is as follows:</li>
<li>Export a full-quality PNG from Adobe Illustrator</li>
<li>Reexport that PNG from Adobe Fireworks as an 8-bit PNG</li>
<li>Run the 8-bit PNG through <a href="https://imageoptim.com">ImageOptim</a></li>
</ul>
<h4 id="templates">Templates<a class="headerlink" href="#templates" title="Permanent link">¶</a></h4>
<ul>
<li>Apps use a jinja template that extends the <code>base.html</code>
  template used by the rest of the site.
  This template would reside in <code>cfgov/jinja2/v1/[project namespace]/index.html</code>
  or similar (for example, <a href="https://github.com/cfpb/cfgov-refresh/blob/master/cfgov/jinja2/v1/owning-a-home/explore-rates/index.html">owning-a-home</a>).</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A template may support a non-standard browser, like an older IE version,
by including the required dependencies, polyfills, etc. in its
template's <code>{% block css %}</code> or <code>{% block javascript scoped %}</code> blocks.</p>
</div>
<h3 id="tip-loading-satellite-apps">TIP: Loading satellite apps<a class="headerlink" href="#tip-loading-satellite-apps" title="Permanent link">¶</a></h3>
<p>Some projects fit within the cfgov-refresh architecture,
but are not fully incorporated into the project.
These are known as "satellite apps."</p>
<p>Satellite apps are listed in the
<a href="https://github.com/cfpb/cfgov-refresh/blob/master/requirements/optional-public.txt">optional-public.txt</a>
requirements file.</p>
<p>In addition to the aforementioned list,
<a href="https://github.com/cfpb/hmda-explorer">HMDA Explorer</a> and
<a href="https://github.com/cfpb/rural-or-underserved-test">Rural or Underserved</a>,
have their own installation requirements.</p>
<p>If using Docker, follow
<a href="https://github.com/cfpb/cfgov-refresh/blob/master/docs/usage.md#develop-satellite-apps">these guidelines</a>.</p>
<p>Otherwise, if not using Docker, follow these guidelines:</p>
<ol>
<li>Build the third-party projects per their directions</li>
<li>Stop the web server and return to <code>cfgov-refresh</code></li>
<li>Run <code>pip install -e ../&lt;sibling&gt;</code> to load the projects' dependencies</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not install the projects directly into the <code>cfgov-refresh</code> directory.
Clone and install the projects as siblings to <code>cfgov-refresh</code>,
so that they share the same parent directory (<code>~/Projects</code> or similar).</p>
</div>
<h3 id="tip-working-with-the-templates">TIP: Working with the templates<a class="headerlink" href="#tip-working-with-the-templates" title="Permanent link">¶</a></h3>
<h4 id="front-end-templateasset-locations">Front-End Template/Asset Locations<a class="headerlink" href="#front-end-templateasset-locations" title="Permanent link">¶</a></h4>
<p><strong>Templates</strong> that are served by the Django server: <code>cfgov\jinja2\v1</code></p>
<p><strong>Static assets</strong> prior to processing (minifying etc.): <code>cfgov\unprocessed</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After running <code>gulp build</code> the site's assets are copied over to <code>cfgov\static_built</code>,
ready to be served by Django.</p>
</div>
<h3 id="tip-debugging-site-performance">TIP: Debugging site performance<a class="headerlink" href="#tip-debugging-site-performance" title="Permanent link">¶</a></h3>
<p>When running locally it is possible to enable the
<a href="https://django-debug-toolbar.readthedocs.io/en/stable/">Django Debug Toolbar</a>
by defining the <code>ENABLE_DEBUG_TOOLBAR</code> environment variable:</p>
<pre class="highlight"><code class="language-sh">$ ENABLE_DEBUG_TOOLBAR=1 ./runserver.sh</code></pre>

<p>This tool exposes various useful pieces of information about things like HTTP headers,
Django settings, SQL queries, and template variables. Note that running with the toolbar on
may have an impact on local server performance.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../travis/" class="btn btn-neutral float-right" title="How We Use Travis CI">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../contributing-docs/" class="btn btn-neutral" title="Contributing to the Docs"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/cfpb/cfgov-refresh/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../contributing-docs/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../travis/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
